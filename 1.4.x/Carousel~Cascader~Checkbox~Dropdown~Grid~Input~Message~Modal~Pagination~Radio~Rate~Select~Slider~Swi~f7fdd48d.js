(window.webpackJsonpShineoutDoc=window.webpackJsonpShineoutDoc||[]).push([[2],{197:function(e,t,n){"use strict";n.d(t,"i",function(){return r}),n.d(t,"j",function(){return a}),n.d(t,"k",function(){return i}),n.d(t,"a",function(){return u}),n.d(t,"g",function(){return o}),n.d(t,"f",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"b",function(){return h}),n.d(t,"h",function(){return d}),n.d(t,"d",function(){return f});var r=function(e){return"__CHANGE_SUBSCRIBE_".concat(e,"__")},a=function(e){return"__ERROR_SUBSCRIBE_".concat(e,"__")},i=function(e){return"__UPDATE_SUBSCRIBE_".concat(e,"__")},u="__CHANGE_TOPIC__",o="__VALIDATE_TOPIC__",s="__RESET_TOPIC__",c="__VALIDATE_FORCE_PASS__",l="__IGNORE_VALIDATE__",h="__UPDATE_ERROR_TYPE__",d="__WITH_OUT_DISPATCH__",f="__IGNORE_BIND__"},199:function(e,t,n){"use strict";var a=n(17),i=n(31),u=n(7),o=n(8),s=n(6),l=n(2),h=n(24),d=n(9),f=n(4),r=n(0),v=n.n(r),p=n(54),c=n(35),b=n(206),m=n(55),g=n(53),y=n(47),j=n(36),O=n(3),E=n(243),k=n(197),F=n(218),V=n(251),D=n(252),x=n(254),A=Object(g.a)(Object(F.b)(["formDatum","disabled","combineRules"]),V.b,D.b,x.b),$=function(e,t){return void 0===e?t:e},C=Object(g.b)(function(e,t,n){if(!e)return t;var r=e(t,n);return void 0===r?t:r});t.a=Object(g.b)(function(r){var e,t;return A((t=e=function(e){function c(e){var t;Object(u.a)(this,c),t=Object(s.a)(this,Object(l.a)(c).call(this,e));var n=e.formDatum,r=e.name,a=e.defaultValue;return t.state={error:void 0,value:e.value||a},t.itemName=Object(j.b)(),t.handleChange=t.handleChange.bind(Object(f.a)(Object(f.a)(t))),t.handleUpdate=t.handleUpdate.bind(Object(f.a)(Object(f.a)(t))),t.handleDatumBind=t.handleDatumBind.bind(Object(f.a)(Object(f.a)(t))),t.handleError=t.handleError.bind(Object(f.a)(Object(f.a)(t))),t.validate=t.validate.bind(Object(f.a)(Object(f.a)(t))),t.validateHook=t.validateHook.bind(Object(f.a)(Object(f.a)(t))),t.lastValue=n&&r&&n.get(r)||{},t}return Object(d.a)(c,e),Object(o.a)(c,[{key:"componentDidMount",value:function(){var n=this;Object(h.a)(Object(l.a)(c.prototype),"componentDidMount",this).call(this);var e=this.props,r=e.formDatum,t=e.loopContext,a=e.name,i=e.defaultValue,u=e.bindInputToItem,o=e.popover;if(r&&a)if(Array.isArray(a)){var s=i||[];a.forEach(function(e,t){return r.bind(e,n.handleUpdate,s[t],n.validate)}),this.state.value=a.map(function(e){return r.get(e)}),r.subscribe(Object(k.j)(this.errorName),this.handleUpdate)}else r.bind(a,this.handleUpdate,i,this.validate),this.state.value=r.get(a);u&&a&&!o&&u(this.errorName),t&&t.bind(this.validate)}},{key:"shouldComponentUpdate",value:function(e,t){var n=[].concat(Object(i.a)(this.props.scuSkip||[]),["formDatum","loopContext"]);this.props.formDatum&&this.props.name&&n.push("value");var r={skip:n,deep:["data","defaultValue","datum","name","rule","style"]};return!(Object(m.b)(e,this.props,r)&&Object(m.b)(t,this.state))}},{key:"componentWillUnmount",value:function(){Object(h.a)(Object(l.a)(c.prototype),"componentWillUnmount",this).call(this);var e=this.props,t=e.formDatum,n=e.name,r=e.loopContext,a=e.unbindInputFromItem;t&&n&&(t.unbind(n,this.handleUpdate),Array.isArray(n)&&(t.unsubscribe(Object(k.j)(this.errorName),this.handleUpdate),t.setError(this.errorName))),a&&n&&a(this.errorName),r&&r.unbind(this.validate)}},{key:"getValue",value:function(){var e=this.props,n=e.formDatum,t=e.name,r=e.value,a=e.defaultValue,i=e.onChange;if(n&&t){if(Array.isArray(t)){var u=a||[];return t.map(function(e,t){return $(n.get(e),u[t])})}return $(n.get(t),a)}return void 0!==r||n||i?r:this.state.value}},{key:"getError",value:function(){var e=this.props,t=e.formDatum,n=e.name;return t&&n?t.getError(this.errorName):this.state.error}},{key:"handleDatumBind",value:function(e){this.datum=e}},{key:"handleError",value:function(e){var t=this.props,n=t.formDatum,r=t.name,a=t.onItemError,i=t.onError;n&&r?Object(b.b)(e,n.getError(this.errorName,!0))||n.setError(this.errorName,e,!0):this.setState({error:e}),i&&i(e),a&&!r&&a(this.itemName,e)}},{key:"validateHook",value:function(e){this.customValidate=e}},{key:"validate",value:function(n,r,e){var t=this,a=this.props,i=a.name,u=a.formDatum,o=a.combineRules,s=a.bind,c=Array.isArray(i)?i:[i],l=[],h=Object(y.e)(this.props,function(e){return"string"==typeof e||"number"==typeof e});if(this.datum){var d=this.datum.formatValue(n);n=1===this.datum.limit?d[0]:d,h.type="array"}if(e===k.c||n===k.c)return this.handleError(),Promise.resolve(!0);(void 0===n||Array.isArray(i))&&(n=this.getValue()),Array.isArray(i)||(n=[n]),this.customValidate&&l.push(this.customValidate()),u&&s&&e!==k.d&&u.validateFields(s,k.d).catch(function(){}),!r&&u&&(r=u.getValue());var f=this.props.rules;return c.forEach(function(e,t){u&&o&&(f=o(e,f)),Object(O.a)(f)&&0<f.length&&l.push(Object(E.a)(n[t],r,f,h))}),Object(b.c)(l).then(function(e){return t.handleError(!0===e?void 0:e),e}).catch(function(e){return t.handleError(e),e})}},{key:"handleChange",value:function(e){for(var t=this.props,n=t.formDatum,r=t.name,a=t.fieldSetValidate,i=t.onChange,u=this.getValue(),o=arguments.length,s=new Array(1<o?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];if(0!==s.length||!Object(m.b)(e,u)){var l=C(this.props.beforeChange);n&&r?(e=l(e,n),n.set(r,e),n.removeFormError(this.errorName)):(e=l(e,null),this.setState({value:e}),this.validate(e).catch(function(){})),i&&i.apply(void 0,[e].concat(s)),a&&a(!0)}}},{key:"handleUpdate",value:function(r,a,e){var t=this;if(e!==k.b){if(e===k.c)return this.handleError(),this.setState({error:void 0}),void this.forceUpdate();var n=this.props,i=n.name,u=n.onChange,o=n.forceChangeOnValueSet,s=Array.isArray(i)?Object(p.a)(this.getValue(),function(n){i.forEach(function(e,t){e===a&&(n[t]=r)})}):r;Object(m.b)(s,this.lastValue)||(this.lastValue=s,u&&o&&u(s),e!==k.e&&(this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){t.validate(s,void 0,e).catch(function(){})})),this.forceUpdate())}else Object(b.b)(r,this.state.error)||this.setState({error:r})}},{key:"render",value:function(){var e=this.props,t=e.formDatum,n=(e.value,e.required,e.loopContext,e.bind,e.onItemError,e.bindInputToItem,e.unbindInputFromItem,e.scuSkip,e.defaultValue,Object(a.a)(e,["formDatum","value","required","loopContext","bind","onItemError","bindInputToItem","unbindInputFromItem","scuSkip","defaultValue"]));return v.a.createElement(r,Object.assign({},n,{formDatum:t,error:this.getError(),value:this.getValue(),onChange:this.handleChange,onDatumBind:this.handleDatumBind,validateHook:this.validateHook}))}},{key:"errorName",get:function(){var e=this.props.name;return Array.isArray(e)?e.join("|"):e}}]),c}(c.a),e.defaultProps={rules:[],scuSkip:["onChange","rules"]},t))})},203:function(e,t,n){"use strict";function r(e){return"string"!=typeof e&&console.error(new Error("str should be a string")),e&&e[0].toUpperCase()+e.slice(1)}function a(e,n){if("string"==typeof e)return e.indexOf("{")<0?e:e.replace(/\\?\{([^{}]+)\}/g,function(e,t){return"\\"===e.charAt(0)?e.slice(1):null===n[t]||void 0===n[t]?"":n[t]});if("function"!=typeof e)return"";var t=e(n);return t===n&&"object"==typeof t&&(t=Object.assign({},n)),t}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},206:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return h});var i=n(7),u=n(6),o=n(2),r=n(9),a=n(224),s=function(e){function a(e,t,n){var r;return Object(i.a)(this,a),(r=Object(u.a)(this,Object(o.a)(a).call(this))).message=e,r.name=t,r.value=n,r}return Object(r.a)(a,e),a}(Object(a.a)(Error)),c=function e(t){return t instanceof Error?new s(t.message):Array.isArray(t)?t.map(e):t},l=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return new Promise(function(n,r){Promise.all(e).then(function(e){var t=e.find(function(e){return!0!==e});t?r(t):n(!0)}).catch(function(e){r(t?c(e):e)})})},h=function(e,t){return e===t||(e instanceof Error&&t instanceof Error?e.message===t.message:e===t)}},210:function(e,t,n){"use strict";var r=n(225),b=n(7),m=n(8),g=n(55),y=n(197),a=function(){function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Object(b.a)(this,c);var t=e.format,n=e.onChange,r=e.separator,a=e.value,i=e.prediction,u=e.distinct,o=e.disabled,s=e.limit;this.distinct=u,this.limit=s,this.separator=r,this.initFormat(t),this.$events={},this.$cachedDisabled={},this.setDisabled(o),i&&(this.prediction=i),this.setValue(a,y.h),this.onChange=n}return Object(m.a)(c,[{key:"setDisabled",value:function(e){this.$cachedDisabled!==e&&(this.$cachedDisabled=e,this.disabled=function(){switch(typeof e){case"boolean":return e;case"function":return e.apply(void 0,arguments);default:return!1}})}},{key:"handleChange",value:function(e){if(this.$values=e,this.dispatch(y.a),this.onChange){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.onChange.apply(this,[this.getValue()].concat(n))}}},{key:"add",value:function(e){var t=this;if(null!=e){1===this.limit&&(this.$values=[]);var n=Array.isArray(e)?e:[e];n=n.filter(function(e){return!t.disabled(e)&&(!t.distinct||!t.check(e))});var r=[],a=!0,i=!1,u=void 0;try{for(var o,s=n[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value,l=this.format(c);void 0!==l&&r.push(l)}}catch(e){i=!0,u=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw u}}this.handleChange(this.values.concat(r),e,!0)}}},{key:"set",value:function(e){this.$values=[],this.add(e)}},{key:"check",value:function(e){if(this.prediction){for(var t=0,n=this.values.length;t<n;t++)if(this.prediction(this.values[t],e))return!0;return!1}return 0<=this.values.indexOf(this.format(e))}},{key:"clear",value:function(){this.values=[]}},{key:"dispatch",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=this.$events[e];a&&a.forEach(function(e){return e.apply(void 0,n)})}},{key:"initFormat",value:function(t){switch(typeof t){case"string":this.format=function(e){return e[t]};break;case"function":this.format=function(e){return t(e)};break;default:this.format=function(e){return e}}}},{key:"defaultPrediction",value:function(e,t){return e===this.format(t)}},{key:"remove",value:function(e){var t=this;if(e){var n=Array.isArray(e)?e:[e];n=n.filter(function(e){return!t.disabled(e)});var r=[],a=this.prediction||this.defaultPrediction.bind(this),i=!0,u=!1,o=void 0;try{e:for(var s,c=this.values[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){for(var l=s.value,h=0;h<n.length;h++)if(n[h].IS_NOT_MATCHED_VALUE||a(l,n[h])){n.splice(h,1);continue e}r.push(l)}}catch(e){u=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(u)throw o}}this.handleChange(r,e,!1)}}},{key:"subscribe",value:function(e,t){this.$events[e]||(this.$events[e]=[]);var n=this.$events[e];t in n||n.push(t)}},{key:"unsubscribe",value:function(e,t){this.$events[e]&&(this.$events[e]=this.$events[e].filter(function(e){return e!==t}))}},{key:"getValue",value:function(){var e=this.values;return 1===this.limit?e=this.values[0]:this.separator&&(e=this.values.join(this.separator)),this.$cachedValue=e}},{key:"resetValue",value:function(e,t){this.$values=e,this.onChange&&!t&&this.onChange(this.getValue()),this.dispatch(y.a),this.dispatch("set-value")}},{key:"formatValue",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return 1!==this.limit||Array.isArray(e)?e?Array.isArray(e)?e:"string"==typeof e?this.separator?e.split(this.separator).map(function(e){return e.trim()}):(console.warn("Select separator parameter is empty."),[e]):(console.error(new Error("Select values is not valid.")),[]):[]:[e]}},{key:"setValue",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];(1<arguments.length?arguments[1]:void 0)===y.h?this.$values=this.formatValue(e):this.resetValue(this.formatValue(e),Object(g.b)(this.$cachedValue,e)),this.$cachedValue=this.getValue()}},{key:"length",get:function(){return this.$values.length}},{key:"values",get:function(){return this.$values},set:function(e){this.$values=e,this.dispatch(y.a),this.onChange&&this.onChange(this.getValue())}}]),c}(),j=n(17),O=n(6),E=n(2),k=n(9),i=n(0),F=n.n(i),u=n(53),V={form:r.a,list:a},o=Object(u.b)(function(e,r){var t,n,a=e||{},i=a.type,u=void 0===i?"list":i,o=a.key,s=void 0===o?"value":o,c=a.limit,l=void 0===c?0:c,h=a.bindProps,d=void 0===h?[]:h,f=a.ignoreUndefined,v=a.pure,p=V[u];return n=t=function(e){function o(n){var e;Object(b.a)(this,o),e=Object(O.a)(this,Object(E.a)(o).call(this,n));var t=n.datum,r=n.onChange,a=n.initValidate,i=n[s];if(t instanceof p)e.datum=t;else{var u=d.reduce(function(e,t){return e[t]=n[t],e},{value:i,limit:l,initValidate:a});e.datum=new p(Object.assign(u,t))}return r&&(e.datum.onChange=r),e}return Object(k.a)(o,e),Object(m.a)(o,[{key:"componentDidMount",value:function(){this.prevValues=this.props[s]}},{key:"componentDidUpdate",value:function(e){e.onChange!==this.props.onChange&&(this.datum.onChange=this.props.onChange);var t=this.props[s];Object(g.b)(t,this.prevValues)||(this.setValue(this.props.initValidate?void 0:y.e),this.prevValues=t)}},{key:"setValue",value:function(e){var t=this.props[s];f&&void 0===t||this.datum.setValue(t,e)}},{key:"render",value:function(){var e=this.props,t=e.onDatumBind,n=Object(j.a)(e,["onDatumBind"]);return t&&t(this.datum),d.includes("disabled")&&void 0!==n.disabled&&this.datum.setDisabled(n.disabled),"list"===u&&this.setValue(y.h),F.a.createElement(r,Object.assign({},n,{datum:this.datum}))}}]),o}(void 0===v||v?F.a.PureComponent:F.a.Component),t.defaultProps={initValidate:!1},n});t.a={Form:r.a,List:a,hoc:o}},218:function(e,t,n){"use strict";var r=n(7),a=n(8),i=n(6),u=n(2),s=n(9),c=n(4),l=n(0),h=n.n(l),o=n(39),d=n.n(o),f=n(53),v=n(47),p=n(3),b=n(31),m=n(228),g=/("(?:[^"\\]|\\.)*")|('(?:[^'\\]|\\.)*')/g,y=/([\w|\d$]+)\s*\(\s*\)/,j=/([\w|\d$]+)\s*\((.+)\)/,O=/^-?(\d*\.)?\d+(e[-+]?\d+)?$/i,E=/\[(\d+)\]/;function k(e){var t=e.match(g)||[],n=[],r=e;t.forEach(function(e,t){n.push(e.substring(1,e.length-1).replace(/\\"/g,'"').replace(/\\'/g,"'")),r=r.replace(e,"[".concat(t,"]"))});var a=[];return r.split(";").forEach(function(e){e&&a.push(function(e,n){if(e.indexOf("(")<0)return[e.trim()];var t=y.exec(e);if(t)return[t[1]];if(!(t=j.exec(e)))throw new Error('"'.concat(e,'" is not a valid rule.'));var r=[];return r.push(t[1]),t[2].split(",").forEach(function(e){if(e=e.trim(),O.test(e))r.push(parseFloat(e));else{var t=E.exec(e);if(!t)throw new Error('Rule argument expect a number or a string. Do you missing the quotes of "'.concat(e,'"?'));r.push(n[t[1]])}}),r}(e,n))}),a}var F=Object(f.b)(function(e,t){var n=Object(m.a)(t),r=n[0],a=n.slice(1);if(!e[r])throw new Error('Method "'.concat(r,'" is not existed.'));return e[r].apply(e,Object(b.a)(a))}),V=n(264);n.d(t,"a",function(){return x}),n.d(t,"c",function(){return $}),n.d(t,"b",function(){return C});var D=d()(),x=D.Provider,A=D.Consumer,$=function(o){return function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(i.a)(this,Object(u.a)(n).call(this,e))).combineRules=t.combineRules.bind(Object(c.a)(Object(c.a)(t))),t.groupValidate=t.groupValidate.bind(Object(c.a)(Object(c.a)(t))),t}return Object(s.a)(n,e),Object(a.a)(n,[{key:"getRulesFromString",value:function(e){var t,n=this.props.rule;return t=n,Object(p.k)(t)&&t.$$type===V.a?e?function(e,t){if(!Object(p.k)(e)||!t)return console.error(new Error("Convert arguments expect an Rule object and a string.")),[];try{var n=F(e);return k(t).map(n)}catch(e){throw new Error('Conver string "'.concat(t,'" to rules failed. ').concat(e.message))}}(n,e):[]:(console.error(new Error("Form rule is missed or is not a Rule instance.")),[])}},{key:"combineRules",value:function(e,t){var n=this.props.rules,r=[];return Object(p.k)(n)&&e?r=Object(v.a)(n,e)||[]:Object(p.a)(n)&&(r=n),"string"==typeof t?r=r.concat(this.getRulesFromString(t)):Object(p.a)(t)&&(r=r.concat(t)),r}},{key:"groupValidate",value:function(e){}},{key:"render",value:function(){var e=this.props,t=e.datum,n=e.labelAlign,r=e.labelWidth,a=e.disabled,i=e.pending,u={formDatum:t,formMode:e.mode,disabled:a||i,labelAlign:n,labelWidth:r,combineRules:this.combineRules,groupValidate:this.groupValidate};return h.a.createElement(x,{value:u},h.a.createElement(o,this.props))}}]),n}(l.PureComponent)},C=Object(f.b)(function(t,a,i){return h.a.createElement(A,null,function(e){return h.a.createElement(a,Object.assign({},(r={},(n=e)?t?(t.forEach(function(e){var t=n[e];void 0!==t&&(r[e]=t)}),r):n:r),i));var n,r})})},225:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(31),c=n(7),r=n(8),a=n(66),i=n.n(a),u=n(65),l=n(67),h=n(47),d=n(3),f=n(206),v=n(197),s=function(){function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,s);var t=e.removeUndefined,n=void 0===t||t,r=e.rules,a=e.onChange,i=e.value,u=e.error,o=e.initValidate;this.rules=r,this.onChange=a,this.removeUndefined=n,this.$inputNames={},this.$values={},this.$defaultValues={},this.$validator={},this.$events={},this.$errors={},this.deepSetOptions={removeUndefined:n,forceSet:!0},i&&this.setValue(i,o?void 0:v.e),u&&this.resetFormError(u)}return Object(r.a)(s,[{key:"handleChange",value:function(){this.onChange&&this.onChange(this.getValue())}},{key:"reset",value:function(){this.$errors={},this.setValue(Object(u.f)(Object(l.b)(this.$defaultValues)),v.c,!0),this.handleChange(),this.dispatch(v.f)}},{key:"get",value:function(e){var t=this;return Array.isArray(e)?e.map(function(e){return t.get(e)}):Object(h.a)(this.$values,e)}},{key:"set",value:function(e,t,n){Object(d.k)(e)&&(t=Object(h.f)(e),e=Object.keys(e)),Object(d.a)(e)?this.setArrayValue(e,t):t!==this.get(e)&&(Object(h.d)(this.$values,e,t,this.deepSetOptions),this.$inputNames[e]&&(this.dispatch(Object(v.k)(e),t,e),this.dispatch(Object(v.i)(e))),n&&this.publishValue(e,v.c),this.dispatch(v.a),this.handleChange())}},{key:"setArrayValue",value:function(e,n){var r=this;e.forEach(function(e,t){Object(h.d)(r.$values,e,n[t],r.deepSetOptions)}),e.forEach(function(e,t){r.$inputNames[e]&&(r.dispatch(Object(v.k)(e),n[t],e),r.dispatch(Object(v.i)(e)))}),this.dispatch(v.a),this.handleChange()}},{key:"insert",value:function(e,t,n){this.insertError(e,t,void 0);var r=this.get(e);r?(r.splice(t,0,n),this.publishValue(e,v.e),this.publishError(e)):this.set(e,[n])}},{key:"splice",value:function(e,t){this.spliceError(e,t),this.get(e).splice(t,1),this.publishValue(e,v.e),this.publishError(e)}},{key:"remove",value:function(e){Object(h.c)(this.$values,e)}},{key:"publishValue",value:function(e,t){var n=this,r="".concat(e,"["),a="".concat(e,".");Object.keys(this.$inputNames).filter(function(e){return 0===e.indexOf(r)||0===e.indexOf(a)}).forEach(function(e){n.dispatch(Object(v.k)(e),n.get(e),e,t)})}},{key:"getError",value:function(e,t){return t?this.$errors[e]:Object(u.b)(e,this.$errors)}},{key:"resetFormError",value:function(){var t,n=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.$errors[""]||(this.$errors[""]={}),t=Object.keys(r).length?Object.keys(r).reduce(function(e,t){return e[t]=r[t]instanceof Error?r[t]:new Error(r[t]),e},{}):Object.keys(this.$errors[""]).reduce(function(e,t){return e[t]=void 0,e},{}),Object.keys(t).map(function(e){return n.setFormError(e,t[e])})}},{key:"removeFormError",value:function(e){this.$errors[""]&&this.$errors[""][e]&&this.setFormError(e)}},{key:"setFormError",value:function(e,t){this.$errors[""]&&(void 0===t?delete this.$errors[""][e]:this.$errors[""][e]=t,this.dispatch(Object(v.j)(e),this.getError(e),e,v.b),this.dispatch(Object(v.k)(e)))}},{key:"setError",value:function(e,t,n){void 0===t?delete this.$errors[e]:this.$errors[e]=t,this.dispatch(Object(v.j)(e),this.getError(e),e,v.b),n&&this.publishError(e)}},{key:"insertError",value:function(e,t,n){Object(u.d)(this.$errors,e,t,n)}},{key:"spliceError",value:function(e,t){Object(u.e)(this.$errors,e,t)}},{key:"publishError",value:function(e){var t=this,n="".concat(e,"["),r="".concat(e,".");Object.keys(this.$inputNames).filter(function(e){return 0===e.indexOf(n)||0===e.indexOf(r)}).forEach(function(e){t.dispatch(Object(v.j)(e),t.getError(e),e,v.b)})}},{key:"getRule",value:function(e){return this.rules&&Object(h.a)(this.rules,e)||[]}},{key:"getValue",value:function(){return Object(l.a)(this.$values)}},{key:"setValue",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;!(2<arguments.length?arguments[2]:void 0)&&i()(e,this.$values)||(this.$values=Object(h.b)({},e,{clone:!0}),setTimeout(function(){Object.keys(t.$inputNames).sort(function(e,t){return e.length-t.length}).forEach(function(e){t.dispatch(Object(v.k)(e),t.get(e),e,n),t.dispatch(Object(v.i)(e))}),t.dispatch(v.a)}))}},{key:"bind",value:function(e,t,n,r){this.$inputNames[e]&&console.warn('There is already an item with name "'.concat(e,'" exists. The name props must be unique.')),void 0!==n&&null==this.get(e)&&(this.set(e,n,!0),this.dispatch(Object(v.i)(e)),this.dispatch(v.a)),n&&(this.$defaultValues[e]=Object(l.b)(n)),this.$validator[e]=r,this.$inputNames[e]=!0,this.subscribe(Object(v.k)(e),t),this.subscribe(Object(v.j)(e),t)}},{key:"unbind",value:function(e){var t=this;Array.isArray(e)?e.forEach(function(e){return t.unbind(e)}):(this.unsubscribe(Object(v.k)(e)),this.unsubscribe(Object(v.j)(e)),delete this.$inputNames[e],delete this.$validator[e],delete this.$errors[e],delete this.$defaultValues[e],Object(h.c)(this.$values,e),this.formUnmount||setTimeout(function(){t.handleChange()}))}},{key:"dispatch",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=this.$events[e];a&&a.forEach(function(e){return e.apply(void 0,n)})}},{key:"subscribe",value:function(e,t){this.$events[e]||(this.$events[e]=[]);var n=this.$events[e];t in n||n.push(t)}},{key:"unsubscribe",value:function(e,t){this.$events[e]&&(t?this.$events[e]=this.$events[e].filter(function(e){return e!==t}):delete this.$events[e])}},{key:"validate",value:function(i){var u=this;return new Promise(function(n,r){var e=Object.keys(u.$validator),t=u.getValue(),a=[].concat(Object(o.a)(e.map(function(e){return u.$validator[e](u.get(e),t,i)})),Object(o.a)((u.$events[v.g]||[]).map(function(e){return e()})));Promise.all(a).then(function(e){var t=e.find(function(e){return!0!==e});void 0===t?n(!0):r(t)}).catch(function(e){r(new f.a(e))})})}},{key:"validateFieldsByName",value:function(t,n){var r=this;if(!t||"string"!=typeof t)return Promise.reject(new Error('Name expect a string, get "'.concat(t,'"')));var a=[],i=this.getValue();return Object.keys(this.$validator).forEach(function(e){e!==t&&0!==e.indexOf(t)||a.push(r.$validator[e](r.get(e),i,n))}),Object(f.c)(a)}},{key:"validateFields",value:function(e,t){var n=this;Array.isArray(e)||(e=[e]);var r=e.map(function(e){return n.validateFieldsByName(e,t)});return Object(f.c)(r)}},{key:"validateClear",value:function(){var t=this,e=Object.keys(this.$validator);this.$errors={};var n=e.map(function(e){return t.$validator[e](v.c)});Promise.all(n)}}]),s}()},239:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r,d=n(33),f={},v={sm:"568",md:"768",lg:"992",xl:"1200"},s="".concat(d.a.prefix,"-grid"),c="".concat(d.a.prefix,"-grid-full"),p="md";function b(e,t){var n=document.head.querySelector("#".concat(t));n||((n=document.createElement("style")).type="text/css",n.id=t,n.innerHTML=e,document.head.appendChild(n))}function l(e,t,n){var r=e,a=n||p;if(!r||r<=0)return"";1<r&&(r=1),r=(r=(100*r).toFixed(4)).substr(0,r.length-1);var i,u,o,s,c,l,h="".concat(d.a.prefix,"-").concat(t,"-").concat(a,"-").concat(r.replace(".","-"));return f[h]||("grid"===t?(s=r,c=h,l=v[a],b("@media screen and (min-width: ".concat(l,"px) { .").concat(c,"{width: ").concat(s,"%} }"),c)):(i=r,u=h,o=v[a],b("@media screen and (min-width: ".concat(o,"px) { .").concat(u,"{margin-left: ").concat(i,"%} }"),u)),f[h]=!0),h}function a(e){var t=e;if(!t)return"";"number"==typeof t&&(t={width:t});var n=t,r=n.width,a=n.offset,i=n.responsive,u=l(r,"grid",i),o=l(a,"offset",i);return"".concat(s," ").concat(c," ").concat(u," ").concat(o)}(r=[]).push("\n.".concat(s," {\n  position: relative;\n  display: inline-block;\n  zoom: 1;\n  letter-spacing: normal;\n  word-spacing: normal;\n  vertical-align: top;\n  text-rendering: auto;\n  box-sizing: border-box;\n}")),r.push(".".concat(c,"{width:100%}")),b(r.join(""),s)},243:function(e,t,n){"use strict";var p=n(17),f=n(210),v=n(206),b=n(203),m=n(65),g=function(r){return function(e,t,n){null!=e&&0!==e.length?r(e,t,n):n(!0)}},y=n(3),o={get email(){return/^((([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/},get integer(){return/^[-+]?[0-9]*$/},get number(){return/^-?(\d*\.)?\d+(e[-+]?\d+)?$/i},get tel(){return/^[\d\s ().-]+$/},get hex(){return/^#[0-9a-f]{6}?$/i},get rgb(){return new RegExp("^rgb\\(\\s*(0|[1-9]\\d?|1\\d\\d?|2[0-4]\\d|25[0-5])\\s*,\\s*(0|[1-9]\\d?|1\\d\\d?|2[0-4]\\d|25[0-5])\\s*,\\s*(0|[1-9]\\d?|1\\d\\d?|2[0-4]\\d|25[0-5])\\s*\\)$")},get rgba(){return new RegExp("^rgba\\(\\s*(0|[1-9]\\d?|1\\d\\d?|2[0-4]\\d|25[0-5])\\s*,\\s*(0|[1-9]\\d?|1\\d\\d?|2[0-4]\\d|25[0-5])\\s*,\\s*(0|[1-9]\\d?|1\\d\\d?|2[0-4]\\d|25[0-5])\\s*,\\s*((0.[1-9]*)|[01])\\s*\\)$")},get ipv4(){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/},get url(){return new RegExp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-zA-Z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$")}},j=function(i,u){return g(function(e,t,n){var r=new Error(u);if("json"!==i){var a=o[i];a||(console.error(new Error("Type '".concat(i,"' not existed."))),n(new Error("Validate failured. Type '".concat(i,"' not existed.")))),a.test(e)?n(!0):n(r)}else!function(e){if("object"==typeof e)return!0;if(!/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return!1;try{return JSON.parse(e),!0}catch(e){return!1}}(e)?n(r):n(!0)})};function O(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof e){if(!e.isInnerValidator)return e;e=e()}"string"==typeof r&&(r={type:r});var a,i,u,s,o,t=e,n=t.type,c=void 0===n?r.type:n,l=t.message,h=t.regExp,d=t.func,f=Object(p.a)(t,["type","message","regExp","func"]);if((r=Object.assign({},r,f)).message="function"==typeof l?l(r):Object(b.b)(l,r),d)return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.apply(void 0,t.concat([r]))};if(f.required)return a=r,function(e,t,n){var r=a.message;null==e||0===e.length?n(new Error(r)):n(!0)};if(h)return i=h,u=r,g(function(e,t,n){var r=u.message;("string"==typeof i?new RegExp(i):i).test(e)?n(!0):n(new Error(r))});if(void 0!==f.min||void 0!==f.max)return"number"===c||"integer"===c?(o=r,g(function(e,t,n){var r=o.min,a=o.max,i=o.message;if(void 0!==e&&""!==e){var u=parseFloat(e);Number.isNaN(u)&&n(new Error(i)),n(!("number"==typeof r&&u<r||"number"==typeof a&&a<u)||new Error(i))}else n(!0)})):(s=r,function(e,t,n){var r=s.min,a=s.max,i=s.message,u=new Error(i);if(Object(y.c)(e))n(!r||u);else{var o=e.length;n(!("number"==typeof r&&o<r||"number"==typeof a&&a<o)||u)}});if(c)return j(c,r.message);var v=new Error("Rule ".concat(JSON.stringify(e)," is not valid."));throw console.error(v),v}t.a=function s(c,l,h,d){return new Promise(function(t,n){var r=Object(m.a)(h),e=r.shift();if(void 0!==e)if(e){var a=function(e){!0===e?s(c,l,r,d).then(t,n):n(Object(v.d)(e))},i=O(e,d),u=c;i===e&&(c instanceof f.a.List||c instanceof f.a.Form)&&(u=c.getValue());var o=i(u,l,a);o&&o.then&&o.then(a.bind(null,!0)).catch(function(e){n(Object(v.d)(e))})}else s(c,l,r,d).then(t,n);else t(!0)})}},251:function(e,t,n){"use strict";n.d(t,"b",function(){return A});var r=n(15),a=n(4),i=n(7),u=n(8),o=n(6),s=n(2),c=n(9),l=n(0),h=n.n(l),d=n(39),f=n.n(d),v=n(11),p=n.n(v),b=n(54),m=n(35),g=n(197),y=n(239),j=n(18),O=n(47),E=n(5),k=f()(),F=k.Provider,V=k.Consumer,D=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.width,n=e.children;return void 0===n?null:h.a.createElement("div",{style:{width:t},className:Object(E.j)("label")},n)}}]),t}(l.PureComponent),x=function(e){function n(e){var t;return Object(i.a)(this,n),(t=Object(o.a)(this,Object(s.a)(n).call(this,e))).state={inputs:{},errors:{}},t.events={bindInputToItem:t.bind.bind(Object(a.a)(Object(a.a)(t))),unbindInputFromItem:t.unbind.bind(Object(a.a)(Object(a.a)(t))),onItemError:t.handleError.bind(Object(a.a)(Object(a.a)(t)))},t.handleUpdate=t.handleUpdate.bind(Object(a.a)(Object(a.a)(t))),e.formDatum&&e.formDatum.subscribe(g.f,t.handleUpdate),t}return Object(c.a)(n,e),Object(u.a)(n,[{key:"getErrors",value:function(){var n=this.props.formDatum,r=[];return n&&Object.keys(this.state.inputs).forEach(function(e){var t=n.getError(e);t&&r.push(t)}),Object(O.f)(this.state.errors).forEach(function(e){e&&r.push(e)}),r}},{key:"handleUpdate",value:function(){var e=this;this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){e.forceUpdate()})}},{key:"bind",value:function(e){var t=this,n=Array.isArray(e)?e:[e],r=this.props.formDatum;r&&n.forEach(function(e){r.subscribe(Object(g.j)(e),t.handleUpdate)}),this.setState(Object(b.a)(function(t){n.forEach(function(e){t.inputs[e]=!0})}))}},{key:"unbind",value:function(e){var n=Array.isArray(e)?e:[e],t=this.props.formDatum;t&&n.forEach(function(e){t.unsubscribe(Object(g.j)(e))}),this.setState(Object(b.a)(function(t){n.forEach(function(e){delete t.inputs[e]})}))}},{key:"handleError",value:function(t,n){this.setState(Object(b.a)(function(e){e.errors[t]=n}))}},{key:"renderHelp",value:function(e){if(0<e.length)return h.a.createElement("div",{className:Object(E.j)("error")},e.map(function(e,t){return h.a.createElement("div",{key:t},e.message)}));var t=this.props.tip;return t?h.a.createElement("div",{className:Object(E.j)("tip")},t):null}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.grid,r=e.label,a=e.labelAlign,i=e.labelWidth,u=e.required,o=e.style,s=this.getErrors(),c=p()(Object(y.a)(n),Object(E.j)("item",u&&"required",0<s.length&&"invalid",0<=["top","right"].indexOf(a)&&"label-align-".concat(a)),this.props.className);return h.a.createElement(F,{value:this.events},h.a.createElement("div",{className:c,style:o},h.a.createElement(D,{width:i},r),h.a.createElement("div",{className:Object(E.j)("control")},t,this.renderHelp(s))))}}]),n}(m.a);x.defaultProps=Object(r.a)({},j.a,{formItemErrors:[]}),t.a=x;var A=function(n){return function(t){return h.a.createElement(V,null,function(e){return h.a.createElement(n,Object.assign({},t,e))})}}},252:function(e,t,n){"use strict";n.d(t,"a",function(){return D}),n.d(t,"b",function(){return x});var o=n(31),r=n(7),i=n(8),u=n(6),s=n(2),c=n(24),l=n(9),h=n(4),a=n(0),d=n.n(a),f=n(39),v=n.n(f),p=n(35),b=n(197),m=n(243),g=n(36),y=n(59),j=n(206),O=n(253),E=v()(),k=E.Provider,F=E.Consumer,V=d.a.Fragment?d.a.Fragment:"span",D=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(u.a)(this,Object(s.a)(a).call(this,e))).contextValue={bind:t.bindValidate.bind(Object(h.a)(Object(h.a)(t))),unbind:t.unbindValidate.bind(Object(h.a)(Object(h.a)(t)))},t.validate=t.validate.bind(Object(h.a)(Object(h.a)(t))),t.selfValidate=t.selfValidate.bind(Object(h.a)(Object(h.a)(t))),t.update=t.forceUpdate.bind(Object(h.a)(Object(h.a)(t))),t.validations=[t.selfValidate],t.keys=[],console.warn("Form.Loop is not recommend. Use Form.FieldSet instead."),t}return Object(l.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){Object(c.a)(Object(s.a)(a.prototype),"componentDidMount",this).call(this);var e=this.props,t=e.formDatum,n=e.name,r=e.defaultValue;t.bind(n,this.handleUpdate.bind(this),r,this.validate)}},{key:"componentWillUnmount",value:function(){Object(c.a)(Object(s.a)(a.prototype),"componentWillUnmount",this).call(this);var e=this.props,t=e.formDatum,n=e.name;t&&n&&t.unbind(n,this.handleUpdate)}},{key:"bindValidate",value:function(e){this.validations.indexOf(e)<0&&this.validations.unshift(e)}},{key:"unbindValidate",value:function(t){this.validations=this.validations.filter(function(e){return e!==t})}},{key:"selfValidate",value:function(){var e=this.props,t=e.formDatum,n=e.name,r=t.get(n),a=t.getValue(),i=Object(o.a)(this.props.rules);return i=i.concat(t.getRule(n)),Object(m.a)(r,a,i,"array").then(function(){return t.setError(n,[]),!0},function(e){return t.setError(n,e),Object(j.d)(e)})}},{key:"updateWithValidate",value:function(){this.selfValidate().then(this.update)}},{key:"validate",value:function(e){var t=e===b.c?b.c:void 0;return Object(j.c)(this.validations.map(function(e){return e(t,void 0)}))}},{key:"handleUpdate",value:function(e,t,n){n===b.b||n===b.e?this.update():n===b.c?this.validate(b.c):this.selfValidate().then(this.update).catch(function(){})}},{key:"handleChange",value:function(e,t,n){var r=this.props,a=r.formDatum,i=r.name;if(n)a.set(i,t);else{var u=a.get(i);u&&(u[e]=t,a.set(i,Object(o.a)(u)))}}},{key:"handleInsert",value:function(e,t){this.keys.splice(e,0,Object(g.b)());var n=this.props,r=n.formDatum,a=n.name;r.insert(a,e,t),this.updateWithValidate()}},{key:"handleRemove",value:function(e){this.keys.splice(e,1);var t=this.props,n=t.formDatum,r=t.name;n.splice(r,e),this.updateWithValidate()}},{key:"render",value:function(){var n=this,e=this.props,r=e.children,t=e.empty,a=e.formDatum,i=e.name,u=e.defaultValue,o=a.get(i)||u,s=a.getError(i);if(0===o.length&&t)return t(this.handleInsert.bind(this,0));Object(y.a)(o.length,0).forEach(function(e){n.keys[e]||(n.keys[e]=Object(g.b)())});var c=Array.isArray(s)?s:[],l=o.map(function(e,t){return d.a.createElement(V,{key:n.keys[t]},r({list:o,value:e,index:t,error:c[t],onChange:n.handleChange.bind(n,t),onInsert:n.handleInsert.bind(n,t),onAppend:n.handleInsert.bind(n,t+1),onRemove:n.handleRemove.bind(n,t)}))});return s instanceof Error&&l.push(d.a.createElement(O.a,{key:"error",error:s})),d.a.createElement(k,{value:this.contextValue},l)}}]),a}(p.b);D.defaultProps={defaultValue:[],rules:[]};var x=function(n){return function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var t=this;return d.a.createElement(F,null,function(e){return d.a.createElement(n,Object.assign({},t.props,{loopContext:e}))})}}]),t}(p.b)}},253:function(e,t,n){"use strict";var r=n(7),a=n(8),i=n(6),u=n(2),o=n(9),s=n(0),c=n.n(s),l=n(5),h=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props.error;return Array.isArray(e)&&(e=e[0]),e instanceof Error?c.a.createElement("div",{className:Object(l.j)("error")},e.message):null}}]),t}(s.PureComponent);t.a=h},254:function(e,t,n){"use strict";n.d(t,"b",function(){return V});var s=n(31),r=n(7),i=n(8),u=n(6),o=n(2),c=n(24),l=n(9),h=n(4),a=n(0),d=n.n(a),f=n(39),v=n.n(f),p=n(35),b=n(47),m=n(243),g=n(206),y=n(197),j=n(253),O=v()(),E=O.Provider,k=O.Consumer,F=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(u.a)(this,Object(o.a)(a).call(this,e))).validate=t.validate.bind(Object(h.a)(Object(h.a)(t))),t.handleUpdate=t.handleUpdate.bind(Object(h.a)(Object(h.a)(t))),t}return Object(l.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){Object(c.a)(Object(o.a)(a.prototype),"componentDidMount",this).call(this);var e=this.props,t=e.formDatum,n=e.name,r=e.defaultValue;t.bind(n,this.handleUpdate,r,this.validate)}},{key:"componentWillUnmount",value:function(){Object(c.a)(Object(o.a)(a.prototype),"componentWillUnmount",this).call(this);var e=this.props,t=e.formDatum,n=e.name;t.unbind(n,this.handleUpdate)}},{key:"validate",value:function(){var t=this,e=this.props,n=e.formDatum,r=e.name,a=n.get(r),i=n.getValue(),u=Object(b.e)(this.props,function(e){return"string"==typeof e||"number"==typeof e});u.type="array";var o=Object(s.a)(this.props.rules);return 0===(o=o.concat(n.getRule(r))).length?Promise.resolve(!0):Object(m.a)(a,i,o,u).then(function(){return t.handleError(),!0},function(e){return t.handleError(e),new g.a(e)})}},{key:"updateWithValidate",value:function(){var e=this;this.validate().then(function(){e.forceUpdate()})}},{key:"handleError",value:function(e){var t=this.props,n=t.formDatum,r=t.name,a=t.onError;Object(g.b)(e,n.getError(r,!0))||(n.setError(r,e,!0),a&&a(e))}},{key:"handleUpdate",value:function(e,t,n){var r=this;this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){n===y.b||n===y.c||n===y.e?r.forceUpdate():r.updateWithValidate()})}},{key:"handleInsert",value:function(e,t){var n=this.props,r=n.formDatum,a=n.name;r.insert(a,e,t),this.updateWithValidate()}},{key:"handleRemove",value:function(e){var t=this.props,n=t.formDatum,r=t.name;n.splice(r,e),this.updateWithValidate()}},{key:"handleChange",value:function(e,t){var n=this.props,r=n.formDatum,a=n.name;r.set("".concat(a,"[").concat(e,"]"),t)}},{key:"render",value:function(){var r=this,e=this.props,a=e.children,i=e.formDatum,u=e.name,t=e.empty,n=e.defaultValue,o=i.getError(u),s=[];if("function"!=typeof a)return d.a.createElement(E,{value:{path:u,val:this.validate}},a,o instanceof Error&&d.a.createElement(j.a,{key:"error",error:o}));var c=i.get(u)||n||[];if(c&&!Array.isArray(c)&&(c=[c]),0===c.length&&t)s.push(t(this.handleInsert.bind(this,0)));else{var l=Array.isArray(o)?o:[];c.forEach(function(e,t){var n=l[t];s.push(d.a.createElement(E,{key:t,value:{path:"".concat(u,"[").concat(t,"]"),val:r.validate}},a({list:c,value:e,index:t,error:n,datum:i,onChange:r.handleChange.bind(r,t),onInsert:r.handleInsert.bind(r,t),onAppend:r.handleInsert.bind(r,t+1),onRemove:r.handleRemove.bind(r,t)})))})}return o instanceof Error&&s.push(d.a.createElement(j.a,{key:"error",error:o})),s}}]),a}(p.a);F.defaultProps={rules:[]};var V=function(a){return function(r){return d.a.createElement(k,null,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.val;return d.a.createElement(a,Object.assign({},r,{name:function t(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length?arguments[1]:void 0;if(void 0!==e)return""===e?n:Array.isArray(e)?e.map(function(e){return t(n,e)}):"".concat(n).concat(0<n.length?".":"").concat(e)}(t,r.name),innerFormNamePath:t,fieldSetValidate:n}))})}};t.a=V(F)},264:function(e,t,n){"use strict";var u=n(47),o=n(3),r=n(203),s=n(129),c={skipUndefined:!0},l=function(e){var t="array"===e.type?"array":"string";return Object(r.b)(Object(s.a)("rules.required.".concat(t)),e)},a=n(37),i=function(n){return function(e){var t="";switch(e.type){case"integer":case"number":t="number";break;case"array":t="array";break;default:t="string"}return Object(r.b)(Object(s.a)("rules.length.".concat(n,".").concat(t)),e)}},h={skipUndefined:!0},d={max:i("max"),min:i("min")},f=function(n){var r=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).message;return function(e,t){return"number"!=typeof e?(console.error(new Error('Rule "'.concat(n,'" param expect a number, get ').concat(typeof e))),null):Object(u.b)({message:d[n]},Object(u.b)(Object(a.a)({message:r},n,e),{message:t},h),h)}},v=function(e){var t=e.title?"rules.type":"rules.reg";return Object(r.b)(Object(s.a)(t),e)},p={skipUndefined:!0},b=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.message,r=e.tip;return function(e){return Object(u.b)({type:t,message:v},Object(u.b)({message:n,tip:r},{message:e},p),p)}},m={skipUndefined:!0};n.d(t,"a",function(){return g});var g="RULE_OBJECT",y=["email","integer","number","url","json","hex","rgb","ipv4"];t.b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!Object(o.k)(t))return console.error(new Error("rules expect an object, got ".concat(typeof options))),{};for(var n=arguments.length,r=new Array(1<n?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(0===r.length)return t;var i=r.shift();return Object.keys(i).forEach(function(e){"function"==typeof i[e]&&(i[e]={func:i[e]})}),e.apply(void 0,[Object(u.b)(t,i)].concat(r))}.apply(void 0,[{}].concat(t)),a={required:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=e.tip;return function(e){return Object(u.b)({required:!0,message:l},Object(u.b)({message:t,tip:n},{message:e},c),c)}}(r.required),max:f("max",r.max),min:f("min",r.min),regExp:function(){var n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).message;return function(e,t){return"string"==typeof e||e instanceof RegExp?Object(u.b)({message:Object(s.a)("rules.reg")},Object(u.b)({message:n,regExp:e},{message:t},m),m):(console.error(new Error('Rule "reg" param expect a RegExp object or a string, get '.concat(typeof e))),null)}}(r.regExp),type:function(e){return b(e,r.type)},length:function(e,t,n){return[a.min(e,n),a.max(t,n)]},range:function(e,t,n){return[a.min(e,n),a.max(t,n)]}};y.forEach(function(e){a[e]=b(e,r[e]||r.type)});var i=Object.keys(a);return Object.keys(r).forEach(function(t){i.includes(t)||(Object(o.k)(r[t])?a[t]=function(e){return Object.assign({},r[t],{args:e})}:console.error(new Error("Rule ".concat(t," is invalid, expect a function or an object."))))}),Object(u.f)(a).forEach(function(e){e.isInnerValidator=!0}),a.$$type=g,a}}}]);